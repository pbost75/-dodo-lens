@import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@300;400;600;700&family=Lato:wght@300;400;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* üé® Variables CSS coh√©rentes avec l'√©cosyst√®me Dodomove */
@layer base {
  :root {
    /* Couleurs syst√®me */
    --background: 0 0% 100%;
    --foreground: 224 71.4% 4.1%;
    --card: 0 0% 100%;
    --card-foreground: 224 71.4% 4.1%;
    --popover: 0 0% 100%;
    --popover-foreground: 224 71.4% 4.1%;
    --primary: 220.9 39.3% 11%;
    --primary-foreground: 210 20% 98%;
    --secondary: 220 14.3% 95.9%;
    --secondary-foreground: 220.9 39.3% 11%;
    --muted: 220 14.3% 95.9%;
    --muted-foreground: 220 8.9% 46.1%;
    --accent: 220 14.3% 95.9%;
    --accent-foreground: 220.9 39.3% 11%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 20% 98%;
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 224 71.4% 4.1%;
    --radius: 0.5rem;

    /* Variables Dodomove personnalis√©es */
    --dodomove-blue: 213 94% 68%;
    --dodomove-blue-dark: 213 94% 50%;
    --dodomove-orange: 9 91% 69%;
    --dodomove-orange-dark: 9 91% 55%;
    
    /* Variables vid√©o sp√©cifiques */
    --video-aspect-ratio: 16/9;
    --video-border-radius: 1rem;
    --recording-color: 239 68 68;
    --processing-color: 59 130 246;
  }

  .dark {
    --background: 224 71.4% 4.1%;
    --foreground: 210 20% 98%;
    --card: 224 71.4% 4.1%;
    --card-foreground: 210 20% 98%;
    --popover: 224 71.4% 4.1%;
    --popover-foreground: 210 20% 98%;
    --primary: 210 20% 98%;
    --primary-foreground: 220.9 39.3% 11%;
    --secondary: 215 27.9% 16.9%;
    --secondary-foreground: 210 20% 98%;
    --muted: 215 27.9% 16.9%;
    --muted-foreground: 217.9 10.6% 64.9%;
    --accent: 215 27.9% 16.9%;
    --accent-foreground: 210 20% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 20% 98%;
    --border: 215 27.9% 16.9%;
    --input: 215 27.9% 16.9%;
    --ring: 216 12.2% 83.9%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: 'Lato', system-ui, sans-serif;
    line-height: 1.6;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Roboto Slab', serif;
    font-weight: 600;
    line-height: 1.3;
  }
  
  /* üì± Styles pour l'interface mobile */
  html {
    /* √âviter le zoom sur focus des inputs sur iOS */
    -webkit-text-size-adjust: 100%;
    /* Smooth scrolling */
    scroll-behavior: smooth;
  }
  
  body {
    /* √âviter le scroll horizontal */
    overflow-x: hidden;
    /* Support des zones s√ªres iOS */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* üé¨ Styles sp√©cifiques vid√©o */
  video {
    @apply w-full h-full object-cover;
    /* D√©sactiver les contr√¥les natifs */
    -webkit-playsinline: true;
    -moz-playsinline: true;
    playsinline: true;
  }
  
  /* üéôÔ∏è Styles pour l'interface audio */
  .speech-recognition-active {
    @apply animate-pulse;
    background: linear-gradient(45deg, #ef4444, #f97316);
    background-size: 200% 200%;
    animation: gradient-x 2s ease infinite;
  }
  
  /* üì± Styles responsive pour mobile */
  @media screen and (max-width: 768px) {
    body {
      font-size: 16px; /* √âviter le zoom sur iOS */
    }
    
    input, textarea, select {
      font-size: 16px; /* √âviter le zoom sur iOS */
    }
  }
  
  /* üåê Styles pour le mode embedded (iframe) */
  .embedded-mode {
    @apply p-0 m-0;
    /* Masquer les √©l√©ments non n√©cessaires en iframe */
  }
  
  .embedded-mode header,
  .embedded-mode footer,
  .embedded-mode .navigation {
    @apply hidden;
  }
}

@layer components {
  /* üé® Boutons coh√©rents avec l'√©cosyst√®me Dodomove */
  .btn-dodomove {
    @apply bg-gradient-to-r from-dodomove-500 to-dodomove-600 hover:from-dodomove-600 hover:to-dodomove-700;
    @apply text-white font-medium px-6 py-3 rounded-lg shadow-lg;
    @apply transition-all duration-200 ease-in-out;
    @apply hover:shadow-xl hover:scale-105;
    @apply active:scale-95;
    @apply focus:outline-none focus:ring-2 focus:ring-dodomove-500 focus:ring-offset-2;
  }
  
  .btn-dodomove-orange {
    @apply bg-gradient-to-r from-dodomove-orange-500 to-dodomove-orange-600;
    @apply hover:from-dodomove-orange-600 hover:to-dodomove-orange-700;
    @apply text-white font-medium px-6 py-3 rounded-lg shadow-lg;
    @apply transition-all duration-200 ease-in-out;
    @apply hover:shadow-xl hover:scale-105;
    @apply active:scale-95;
    @apply focus:outline-none focus:ring-2 focus:ring-dodomove-orange-500 focus:ring-offset-2;
  }
  
  /* üé¨ Composants vid√©o */
  .video-recorder-container {
    @apply relative w-full h-screen bg-black overflow-hidden;
    @apply flex flex-col;
  }
  
  .video-preview {
    @apply flex-1 relative;
    @apply bg-gray-900;
  }
  
  .video-controls {
    @apply absolute bottom-0 left-0 right-0;
    @apply bg-gradient-to-t from-black/80 to-transparent;
    @apply p-6 pb-8;
    @apply flex items-center justify-center space-x-6;
  }
  
  .recording-button {
    @apply w-16 h-16 rounded-full border-4 border-white;
    @apply flex items-center justify-center;
    @apply transition-all duration-200;
    @apply hover:scale-110 active:scale-95;
  }
  
  .recording-button.recording {
    @apply bg-red-500 border-red-500;
    @apply animate-recording;
  }
  
  .recording-button.stopped {
    @apply bg-transparent border-white;
  }
  
  /* üìã Styles pour le tableau d'objets */
  .items-table {
    @apply space-y-3;
  }
  
  .item-row {
    @apply bg-white rounded-lg shadow-sm border border-gray-200;
    @apply p-4 transition-all duration-200;
    @apply hover:shadow-md hover:border-gray-300;
  }
  
  .item-row.editing {
    @apply border-dodomove-500 shadow-lg;
  }
  
  /* üéôÔ∏è Transcript en temps r√©el */
  .transcript-overlay {
    @apply absolute bottom-20 left-4 right-4;
    @apply bg-black/70 backdrop-blur-sm;
    @apply text-white p-4 rounded-lg;
    @apply animate-fade-in;
  }
  
  .transcript-text {
    @apply text-sm leading-relaxed;
  }
  
  .transcript-confidence {
    @apply text-xs text-gray-300 mt-2;
  }
  
  /* ü§ñ Indicateurs de traitement IA */
  .ai-processing {
    @apply flex items-center justify-center space-x-3;
    @apply bg-blue-50 border border-blue-200 rounded-lg p-4;
    @apply animate-fade-in;
  }
  
  .ai-processing-spinner {
    @apply w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full;
    @apply animate-spin;
  }
  
  .ai-confidence-score {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium;
  }
  
  .ai-confidence-score.high {
    @apply bg-green-100 text-green-800;
  }
  
  .ai-confidence-score.medium {
    @apply bg-yellow-100 text-yellow-800;
  }
  
  .ai-confidence-score.low {
    @apply bg-red-100 text-red-800;
  }
  
  /* üì± Layouts responsive */
  .mobile-layout {
    @apply flex flex-col h-screen;
  }
  
  .mobile-header {
    @apply flex-shrink-0 p-4 bg-white shadow-sm;
  }
  
  .mobile-content {
    @apply flex-1 overflow-y-auto p-4;
  }
  
  .mobile-footer {
    @apply flex-shrink-0 p-4 bg-white border-t border-gray-200;
  }
  
  /* üåä Loader bateau anim√© (coh√©rent avec l'√©cosyst√®me) */
  .boat-loader {
    @apply relative inline-block w-12 h-12;
  }
  
  .boat-loader::before {
    content: 'üö¢';
    @apply absolute inset-0 flex items-center justify-center text-2xl;
    @apply animate-boat-float;
  }
  
  .boat-loader::after {
    content: '';
    @apply absolute bottom-0 left-1/2 transform -translate-x-1/2;
    @apply w-8 h-1 bg-blue-200 rounded-full;
    @apply animate-pulse;
  }
  
  /* üîÑ √âtats de chargement */
  .loading-overlay {
    @apply absolute inset-0 bg-white/80 backdrop-blur-sm;
    @apply flex items-center justify-center;
    @apply animate-fade-in;
  }
  
  .loading-content {
    @apply flex flex-col items-center space-y-4;
    @apply text-center;
  }
  
  /* ‚ú® Effets visuels */
  .shimmer {
    @apply relative overflow-hidden;
  }
  
  .shimmer::before {
    content: '';
    @apply absolute inset-0 bg-shimmer-gradient;
    @apply animate-shimmer;
  }
  
  .glass-effect {
    @apply bg-white/10 backdrop-blur-lg border border-white/20;
  }
  
  .glass-effect-dark {
    @apply bg-black/10 backdrop-blur-lg border border-white/10;
  }
}

@layer utilities {
  /* üì± Utilitaires pour les zones s√ªres iOS */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* üé¨ Utilitaires vid√©o */
  .aspect-video-vertical {
    aspect-ratio: 9 / 16;
  }
  
  .object-cover-center {
    object-fit: cover;
    object-position: center;
  }
  
  /* üéØ Utilitaires d'√©tat */
  .is-recording {
    @apply ring-4 ring-red-500 ring-opacity-50;
  }
  
  .is-processing {
    @apply ring-4 ring-blue-500 ring-opacity-50;
  }
  
  .is-completed {
    @apply ring-4 ring-green-500 ring-opacity-50;
  }
  
  /* üìê Utilitaires de taille */
  .h-screen-safe {
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
  
  .min-h-screen-safe {
    min-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
  
  /* üåà Utilitaires de couleur personnalis√©s */
  .text-dodomove {
    color: hsl(var(--dodomove-blue));
  }
  
  .text-dodomove-orange {
    color: hsl(var(--dodomove-orange));
  }
  
  .bg-dodomove {
    background-color: hsl(var(--dodomove-blue));
  }
  
  .bg-dodomove-orange {
    background-color: hsl(var(--dodomove-orange));
  }
  
  /* üîß Utilitaires divers */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  .will-change-transform {
    will-change: transform;
  }
}

/* üé¨ Animations CSS personnalis√©es */
@keyframes recording {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

@keyframes processing {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-up {
  0% {
    transform: translateY(100%);
  }
  100% {
    transform: translateY(0);
  }
}

@keyframes boat-float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-10px) rotate(1deg);
  }
}

@keyframes gradient-x {
  0%, 100% {
    background-size: 200% 200%;
    background-position: left center;
  }
  50% {
    background-size: 200% 200%;
    background-position: right center;
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* üåê Styles pour le mode embedded */
.embedded-mode {
  /* Masquer les √©l√©ments non n√©cessaires */
}

.embedded-mode .main-header,
.embedded-mode .main-footer,
.embedded-mode .main-navigation {
  display: none !important;
}

/* üì± Optimisations pour les performances mobiles */
* {
  -webkit-tap-highlight-color: transparent;
}

button, a, [role="button"] {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

/* üéØ Focus states accessibles */
.focus-visible {
  outline: 2px solid hsl(var(--dodomove-blue));
  outline-offset: 2px;
}

/* üîß Reset pour les √©l√©ments de formulaire */
input[type="file"] {
  @apply sr-only;
}

/* üé® Coh√©rence avec l'√©cosyst√®me Dodomove */
.dodomove-gradient {
  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
}

.dodomove-orange-gradient {
  background: linear-gradient(135deg, #f47d6c 0%, #e55a47 100%);
}
